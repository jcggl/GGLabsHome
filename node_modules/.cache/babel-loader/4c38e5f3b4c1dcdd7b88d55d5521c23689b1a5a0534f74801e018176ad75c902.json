{"ast":null,"code":"import _toConsumableArray from\"/Users/magicmars123/Desktop/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8\\u1100\\u1169\\u11BC\\u1100\\u1161\\u11AB.nosync/GGlabsBuild/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/magicmars123/Desktop/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8\\u1100\\u1169\\u11BC\\u1100\\u1161\\u11AB.nosync/GGlabsBuild/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/magicmars123/Desktop/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8\\u1100\\u1169\\u11BC\\u1100\\u1161\\u11AB.nosync/GGlabsBuild/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useCallback}from\"react\";import{useRef}from\"react\";import useResize from\"./useResize\";import{useLocation}from'react-router-dom';var useScrollPagination=function useScrollPagination(){var ref=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),touch=_useState2[0],setTouch=_useState2[1];var _useResize=useResize(),pageHeight=_useResize.height;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),throttle=_useState4[0],setThrottle=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFooter=_useState8[0],setIsFooter=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),timer=_useState10[0],setTimer=_useState10[1];var location=useLocation();var _useState11=useState({transform:\"translateY(0px)\",transition:\"all 0.7s ease-in-out\"}),_useState12=_slicedToArray(_useState11,2),style=_useState12[0],setStyle=_useState12[1];useEffect(function(){setPage(0);setStyle(function(){return{transform:\"translateY(0px)\",transition:\"all 0.7s ease-in-out\"};});setTimeout(function(){setThrottle(false);},1110);},[location]);useEffect(function(){setStyle(function(prev){return _objectSpread(_objectSpread({},prev),{},{transform:\"translateY(\".concat(page,\"px)\")});});},[page]);var handleTouchStart=useCallback(function(e){var currentTouch=e.touches[0].clientY;setTouch(currentTouch);},[]);var touchScrollHandler=useCallback(function(e){e.preventDefault();var touchDown=touch;if(touchDown===null)return;if(throttle)return;setTouch(null);setThrottle(true);setTimeout(function(){setThrottle(false);},1110);var footerMinus=page-ref.current.children[5].clientHeight;var footerPlus=page+ref.current.children[5].clientHeight;var minusScroll=page-pageHeight;var plusScroll=page+pageHeight;var currentTouch=e.touches[0].clientY;var touchDirection=touchDown-currentTouch;if(!throttle&&touchDown){if(touchDirection>4){//아래로 스크롤;\nif(page<=0&&page>-pageHeight*4){setPage(minusScroll);}else if(page===-pageHeight*4&&!isFooter){setPage(footerMinus);setIsFooter(true);}}else if(touchDirection<-4){//위로 스크롤\nif(isFooter){setPage(footerPlus);setIsFooter(false);}else if(page<0){// movePage(pageHeight);\nsetPage(plusScroll);}}}},[isFooter,page,pageHeight,throttle,touch]);var wheelHandler=useCallback(function(e){e.preventDefault();// const pageHeight = ref.current.clientHeight;\nvar scrollDown=e.deltaY>0;var scrollUp=e.deltaY<=0;var copyThrottle=throttle;var newTimer=timer;if(copyThrottle)return;timer.forEach(function(item){clearTimeout(item);});setTimer([]);setThrottle(true);var t=setTimeout(function(){setThrottle(false);},1410);setTimer([].concat(_toConsumableArray(newTimer),[t]));var footerMinus=page-ref.current.children[5].clientHeight;var footerPlus=page+ref.current.children[5].clientHeight;var minusScroll=page-pageHeight;var plusScroll=page+pageHeight;if(!copyThrottle){if(scrollDown){//아래로 스크롤;\nif(page<=0&&page>-pageHeight*4){setPage(minusScroll);}else if(page===-pageHeight*4&&!isFooter){setPage(footerMinus);setIsFooter(true);}}else if(scrollUp){//위로 스크롤\nif(isFooter){setPage(footerPlus);setIsFooter(false);}else if(page<0){// movePage(pageHeight);\nsetPage(plusScroll);}}}},[isFooter,page,pageHeight,throttle,timer]);useEffect(function(){var refCurrent=ref.current;refCurrent.addEventListener(\"wheel\",wheelHandler);refCurrent.addEventListener(\"touchstart\",handleTouchStart);refCurrent.addEventListener(\"touchmove\",touchScrollHandler);return function(){refCurrent.removeEventListener(\"wheel\",wheelHandler);refCurrent.removeEventListener(\"touchstart\",handleTouchStart);refCurrent.removeEventListener(\"touchmove\",touchScrollHandler);};},[wheelHandler,touchScrollHandler,handleTouchStart]);return{ref:ref,style:style};};export default useScrollPagination;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}