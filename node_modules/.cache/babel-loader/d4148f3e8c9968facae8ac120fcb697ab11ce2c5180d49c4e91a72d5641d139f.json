{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useRef, useEffect } from \"react\";\nconst useMoveSlide = imageSize => {\n  _s();\n  const imgSize = useRef(imageSize);\n  const [current, setCurrent] = useState(1);\n  const [style, setStyle] = useState({\n    marginLeft: `-${current}00%`,\n    transition: \"all 0.3s ease-out\"\n  });\n  const [throttle, setThrottle] = useState(false);\n  const [timer, setTimer] = useState();\n  const moveSlide = index => {\n    if (imageSize <= 3) return;\n    if (throttle) return;\n    clearTimeout(timer);\n    setTimer(setTimeout(() => {\n      setThrottle(false);\n    }, 600));\n    let nextIndex = current + index;\n\n    //앞 뒤로 복사된 크기에서 원본 사진 개수만큼 인덱스 이동\n    if (nextIndex < 0) nextIndex += imgSize.current - 1;else if (nextIndex >= imgSize.current) nextIndex -= imgSize.current - 1;\n    setThrottle(true);\n    setCurrent(nextIndex);\n  };\n  useEffect(() => {\n    setStyle(prev => ({\n      ...prev,\n      marginLeft: `-${current}00%`\n    }));\n  }, [current]);\n\n  //0.3초의 transition을 잠깐 없애고 양 끝이 아니라면 transition을 다시 적용.\n  useEffect(() => {\n    if (current === 0) {\n      let timer = setTimeout(() => {\n        setCurrent(prev => imgSize.current - 2);\n        setStyle(prev => ({\n          ...prev,\n          transition: \"\"\n        }));\n      }, 300);\n      return () => clearTimeout(timer);\n    } else if (current === imgSize.current - 1) {\n      let timer = setTimeout(() => {\n        setCurrent(prev => 1);\n        setStyle(prev => ({\n          ...prev,\n          transition: \"\"\n        }));\n      }, 300);\n      return () => clearTimeout(timer);\n    } else if (current === 1 || current === imgSize.current - 2) {\n      let timer = setTimeout(() => {\n        setStyle(prev => ({\n          ...prev,\n          transition: \"all 0.3s ease-out\"\n        }));\n      }, 100);\n      return () => clearTimeout(timer);\n    }\n  }, [current]);\n  return {\n    moveSlide,\n    style,\n    current\n  };\n};\n_s(useMoveSlide, \"AYgv5hbg/pNr8w3qWN5C/ZYeBaE=\");\nexport default useMoveSlide;","map":{"version":3,"names":["useState","useRef","useEffect","useMoveSlide","imageSize","imgSize","current","setCurrent","style","setStyle","marginLeft","transition","throttle","setThrottle","timer","setTimer","moveSlide","index","clearTimeout","setTimeout","nextIndex","prev"],"sources":["/Users/magicmars123/Desktop/작업공간.nosync/GGlabsBuild/src/hooks/useMoveSlide.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\";\n\ninterface positionStyleType {\n  marginLeft: string;\n  transition: string;\n}\n\nconst useMoveSlide = (imageSize: number) => {\n  const imgSize = useRef<number>(imageSize);\n  const [current, setCurrent] = useState<number>(1);\n  const [style, setStyle] = useState<positionStyleType>({\n    marginLeft: `-${current}00%`,\n    transition: \"all 0.3s ease-out\",\n  });\n  const [throttle, setThrottle] = useState<boolean>(false);\n  const [timer, setTimer] = useState<any>();\n  const moveSlide = (index: number): void => {\n    if (imageSize <= 3) return;\n    if (throttle) return\n    \n    clearTimeout(timer);\n    setTimer(setTimeout(() => {\n      setThrottle(false);\n    }, 600));\n\n    let nextIndex: number = current + index;\n\n    //앞 뒤로 복사된 크기에서 원본 사진 개수만큼 인덱스 이동\n    if (nextIndex < 0) nextIndex += imgSize.current - 1;\n    else if (nextIndex >= imgSize.current) nextIndex -= imgSize.current - 1;\n    setThrottle(true);\n    setCurrent(nextIndex);\n  };\n\n  useEffect(() => {\n    setStyle((prev) => ({ ...prev, marginLeft: `-${current}00%` }));\n  }, [current]);\n\n  //0.3초의 transition을 잠깐 없애고 양 끝이 아니라면 transition을 다시 적용.\n  useEffect(() => {\n    if (current === 0) {\n      let timer = setTimeout(() => {\n        setCurrent((prev) => imgSize.current - 2);\n        setStyle((prev) => ({ ...prev, transition: \"\" }));\n      }, 300);\n      return () => clearTimeout(timer);\n    } else if (current === imgSize.current - 1) {\n      let timer = setTimeout(() => {\n        setCurrent((prev) => 1);\n        setStyle((prev) => ({ ...prev, transition: \"\" }));\n      }, 300);\n      return () => clearTimeout(timer);\n    } else if (current === 1 || current === imgSize.current - 2) {\n      let timer = setTimeout(() => {\n        setStyle((prev) => ({ ...prev, transition: \"all 0.3s ease-out\" }));\n      }, 100);\n      return () => clearTimeout(timer);\n    }\n  }, [current]);\n\n  return { moveSlide, style, current };\n};\n\nexport default useMoveSlide;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}