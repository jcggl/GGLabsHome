{"ast":null,"code":"var _s = $RefreshSig$();\nimport { intersectionState, partnerState, wallState } from \"@/store/atoms\";\nimport { useCallback, useRef, useEffect } from \"react\";\nimport { useRecoilState, useSetRecoilState } from \"recoil\";\nconst usePartnerAnimation = function () {\n  _s();\n  let duration = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  let delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  const ref = useRef();\n  const [partner, setPartner] = useRecoilState(partnerState);\n  const setIntersection = useSetRecoilState(intersectionState);\n  const setWall = useSetRecoilState(wallState);\n  const handleScroll = useCallback(_ref => {\n    let [entry] = _ref;\n    if (entry.isIntersecting && partner) {\n      for (let i = 0; i < 2; i++) {\n        ref.current.children[i].style.transitionProperty = \"all\";\n        ref.current.children[i].style.transitionDuration = `${duration}s`;\n        ref.current.children[i].style.transitionTimingFunction = \"cubic-bezier(0, 0, 0.58, 1)\";\n        ref.current.children[i].style.transitionDelay = `${delay}s`;\n      }\n      ref.current.children[0].style.transform = \"translate3d(0,0,0)\";\n      ref.current.children[1].style.transform = \"translate3d(0,0,0)\";\n      setTimeout(() => {\n        setIntersection(false);\n        setWall(() => false);\n      }, 310);\n    } else if (!partner) {\n      ref.current.children[0].style.transform = \"translate3d(0,-15vh,0)\";\n      ref.current.children[1].style.transform = \"translate3d(0,-15vh,0)\";\n      setPartner(true);\n    }\n  }, [duration, delay, setIntersection, partner, setPartner, setWall]);\n  useEffect(() => {\n    let observer;\n    if (ref.current) {\n      observer = new IntersectionObserver(handleScroll, {\n        threshold: 0.2,\n        rootMargin: \"0px 0px 0px 0px\"\n      });\n      observer.observe(ref.current);\n    }\n    return () => observer && observer.disconnect();\n  }, [handleScroll]);\n  return {\n    ref,\n    style: {\n      transform: \"translate3d(0,-15vh,0)\"\n    }\n  };\n};\n_s(usePartnerAnimation, \"ypjOi7Deyv6QQz9nPsLl9OcqEds=\", false, function () {\n  return [useRecoilState, useSetRecoilState, useSetRecoilState];\n});\nexport default usePartnerAnimation;","map":{"version":3,"names":["intersectionState","partnerState","wallState","useCallback","useRef","useEffect","useRecoilState","useSetRecoilState","usePartnerAnimation","duration","delay","ref","partner","setPartner","setIntersection","setWall","handleScroll","entry","isIntersecting","i","current","children","style","transitionProperty","transitionDuration","transitionTimingFunction","transitionDelay","transform","setTimeout","observer","IntersectionObserver","threshold","rootMargin","observe","disconnect"],"sources":["/Users/magicmars123/Desktop/작업공간.nosync/GGlabsBuild/src/hooks/usePartnerAnimation.tsx"],"sourcesContent":["import { intersectionState, partnerState, wallState } from \"@/store/atoms\";\nimport { useCallback, useRef, useEffect } from \"react\";\nimport { useRecoilState, useSetRecoilState } from \"recoil\";\n\nconst usePartnerAnimation = (duration: number = 1, delay: number = 0) => {\n  const ref = useRef<any>();\n  const [partner, setPartner] = useRecoilState(partnerState);\n  const setIntersection = useSetRecoilState(intersectionState);\n  const setWall = useSetRecoilState(wallState);\n\n  const handleScroll = useCallback(\n    ([entry]: any) => {\n      if (entry.isIntersecting && partner) {\n        for (let i = 0; i < 2; i++) {\n          ref.current.children[i].style.transitionProperty = \"all\";\n          ref.current.children[i].style.transitionDuration = `${duration}s`;\n          ref.current.children[i].style.transitionTimingFunction =\n            \"cubic-bezier(0, 0, 0.58, 1)\";\n          ref.current.children[i].style.transitionDelay = `${delay}s`;\n        }\n        ref.current.children[0].style.transform = \"translate3d(0,0,0)\";\n        ref.current.children[1].style.transform = \"translate3d(0,0,0)\";\n        setTimeout(() => {\n          setIntersection(false);\n          setWall(() => false);\n        }, 310)\n      } else if (!partner) {\n        ref.current.children[0].style.transform = \"translate3d(0,-15vh,0)\";\n        ref.current.children[1].style.transform = \"translate3d(0,-15vh,0)\";\n        setPartner(true);\n      }\n    },\n    [duration, delay, setIntersection, partner, setPartner, setWall]\n  );\n\n  useEffect(() => {\n    let observer: any;\n\n    if (ref.current) {\n      observer = new IntersectionObserver(handleScroll, {\n        threshold: 0.2,\n        rootMargin: \"0px 0px 0px 0px\",\n      });\n      observer.observe(ref.current);\n    }\n\n    return () => observer && observer.disconnect();\n  }, [handleScroll]);\n\n  return {\n    ref,\n    style: {\n      transform: \"translate3d(0,-15vh,0)\",\n    },\n  };\n};\n\nexport default usePartnerAnimation;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}