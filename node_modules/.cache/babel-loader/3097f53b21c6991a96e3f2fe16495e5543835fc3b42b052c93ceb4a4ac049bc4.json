{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useRef } from \"react\";\nimport useResize from \"./useResize\";\nimport { useLocation } from 'react-router-dom';\nconst useScrollPagination = () => {\n  _s();\n  const ref = useRef();\n  const [touch, setTouch] = useState(null);\n  const {\n    height: pageHeight\n  } = useResize();\n  const [throttle, setThrottle] = useState(true);\n  const [page, setPage] = useState(0);\n  const [isFooter, setIsFooter] = useState(false);\n  const [timer, setTimer] = useState([]);\n  const location = useLocation();\n  const [style, setStyle] = useState({\n    transform: `translateY(0px)`,\n    transition: \"all 0.7s ease-in-out\"\n  });\n  useEffect(() => {\n    setPage(0);\n    setStyle(() => {\n      return {\n        transform: `translateY(0px)`,\n        transition: \"all 0.7s ease-in-out\"\n      };\n    });\n    setTimeout(() => {\n      setThrottle(false);\n    }, 1110);\n  }, [location]);\n  useEffect(() => {\n    setStyle(prev => ({\n      ...prev,\n      transform: `translateY(${page}px)`\n    }));\n  }, [page]);\n  const handleTouchStart = useCallback(e => {\n    const currentTouch = e.touches[0].clientY;\n    setTouch(currentTouch);\n  }, []);\n  const touchScrollHandler = useCallback(e => {\n    e.preventDefault();\n    const touchDown = touch;\n    if (touchDown === null) return;\n    if (throttle) return;\n    setTouch(null);\n    setThrottle(true);\n    setTimeout(() => {\n      setThrottle(false);\n    }, 1110);\n    const footerMinus = page - ref.current.children[5].clientHeight;\n    const footerPlus = page + ref.current.children[5].clientHeight;\n    const minusScroll = page - pageHeight;\n    const plusScroll = page + pageHeight;\n    const currentTouch = e.touches[0].clientY;\n    const touchDirection = touchDown - currentTouch;\n    if (!throttle && touchDown) {\n      if (touchDirection > 4) {\n        //아래로 스크롤;\n        if (page <= 0 && page > -pageHeight * 4) {\n          setPage(minusScroll);\n        } else if (page === -pageHeight * 4 && !isFooter) {\n          setPage(footerMinus);\n          setIsFooter(true);\n        }\n      } else if (touchDirection < -4) {\n        //위로 스크롤\n        if (isFooter) {\n          setPage(footerPlus);\n          setIsFooter(false);\n        } else if (page < 0) {\n          // movePage(pageHeight);\n          setPage(plusScroll);\n        }\n      }\n    }\n  }, [isFooter, page, pageHeight, throttle, touch]);\n  const wheelHandler = useCallback(e => {\n    e.preventDefault();\n    // const pageHeight = ref.current.clientHeight;\n    const scrollDown = e.deltaY > 0;\n    const scrollUp = e.deltaY <= 0;\n    const copyThrottle = throttle;\n    const newTimer = timer;\n    if (copyThrottle) return;\n    timer.forEach(item => {\n      clearTimeout(item);\n    });\n    setTimer([]);\n    setThrottle(true);\n    let t = setTimeout(() => {\n      setThrottle(false);\n    }, 1410);\n    setTimer([...newTimer, t]);\n    const footerMinus = page - ref.current.children[5].clientHeight;\n    const footerPlus = page + ref.current.children[5].clientHeight;\n    const minusScroll = page - pageHeight;\n    const plusScroll = page + pageHeight;\n    if (!copyThrottle) {\n      if (scrollDown) {\n        //아래로 스크롤;\n        if (page <= 0 && page > -pageHeight * 4) {\n          setPage(minusScroll);\n        } else if (page === -pageHeight * 4 && !isFooter) {\n          setPage(footerMinus);\n          setIsFooter(true);\n        }\n      } else if (scrollUp) {\n        //위로 스크롤\n        if (isFooter) {\n          setPage(footerPlus);\n          setIsFooter(false);\n        } else if (page < 0) {\n          // movePage(pageHeight);\n          setPage(plusScroll);\n        }\n      }\n    }\n  }, [isFooter, page, pageHeight, throttle, timer]);\n  useEffect(() => {\n    const refCurrent = ref.current;\n    refCurrent.addEventListener(\"wheel\", wheelHandler);\n    refCurrent.addEventListener(\"touchstart\", handleTouchStart);\n    refCurrent.addEventListener(\"touchmove\", touchScrollHandler);\n    return () => {\n      refCurrent.removeEventListener(\"wheel\", wheelHandler);\n      refCurrent.removeEventListener(\"touchstart\", handleTouchStart);\n      refCurrent.removeEventListener(\"touchmove\", touchScrollHandler);\n    };\n  }, [wheelHandler, touchScrollHandler, handleTouchStart]);\n  return {\n    ref,\n    style\n  };\n};\n_s(useScrollPagination, \"iVOOo4KdMTQ2yr7MbKLc6OBLbHo=\", false, function () {\n  return [useResize, useLocation];\n});\nexport default useScrollPagination;","map":{"version":3,"names":["useState","useEffect","useCallback","useRef","useResize","useLocation","useScrollPagination","ref","touch","setTouch","height","pageHeight","throttle","setThrottle","page","setPage","isFooter","setIsFooter","timer","setTimer","location","style","setStyle","transform","transition","setTimeout","prev","handleTouchStart","e","currentTouch","touches","clientY","touchScrollHandler","preventDefault","touchDown","footerMinus","current","children","clientHeight","footerPlus","minusScroll","plusScroll","touchDirection","wheelHandler","scrollDown","deltaY","scrollUp","copyThrottle","newTimer","forEach","item","clearTimeout","t","refCurrent","addEventListener","removeEventListener"],"sources":["/Users/magicmars123/Desktop/작업공간.nosync/GGlabsBuild/src/hooks/useScrollPagination.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { useRef } from \"react\";\nimport useResize from \"./useResize\";\nimport { useLocation } from 'react-router-dom';\ninterface positionStyleType {\n  transform: string;\n  transition: string;\n  OverflowY?: string;\n}\n\nconst useScrollPagination = () => {\n  const ref = useRef<any>();\n  const [touch, setTouch] = useState<number | null>(null);\n  const { height: pageHeight } = useResize();\n  const [throttle, setThrottle] = useState<boolean>(true);\n  const [page, setPage] = useState<number>(0);\n  const [isFooter, setIsFooter] = useState<boolean>(false);\n  const [timer, setTimer] = useState<any>([]);\n  const location = useLocation()\n\n  const [style, setStyle] = useState<positionStyleType>({\n    transform: `translateY(0px)`,\n    transition: \"all 0.7s ease-in-out\",\n  });\n\n  useEffect(() => {\n    setPage(0)\n    setStyle(() => {\n      return {\n        transform: `translateY(0px)`,\n        transition: \"all 0.7s ease-in-out\",\n      };\n    });\n    setTimeout(() => {\n      setThrottle(false);\n    }, 1110);\n  }, [location]);\n\n  useEffect(() => {\n    setStyle((prev) => ({ ...prev, transform: `translateY(${page}px)` }));\n  }, [page]);\n\n  const handleTouchStart = useCallback(\n    (e: React.TouchEvent<HTMLInputElement>): void => {\n      const currentTouch = e.touches[0].clientY;\n      setTouch(currentTouch);\n    },\n    []\n  );\n  const touchScrollHandler = useCallback(\n    (e: React.TouchEvent<HTMLInputElement>): void => {\n      e.preventDefault();\n      const touchDown: number | null = touch;\n      if (touchDown === null) return;\n      if (throttle) return;\n      setTouch(null);\n      setThrottle(true);\n      setTimeout(() => {\n        setThrottle(false);\n      }, 1110);\n      const footerMinus = page - ref.current.children[5].clientHeight;\n      const footerPlus = page + ref.current.children[5].clientHeight;\n      const minusScroll = page - pageHeight;\n      const plusScroll = page + pageHeight;\n      const currentTouch = e.touches[0].clientY;\n      const touchDirection = touchDown - currentTouch;\n      if (!throttle && touchDown) {\n        if (touchDirection > 4) {\n          //아래로 스크롤;\n          if (page <= 0 && page > -pageHeight * 4) {\n            setPage(minusScroll);\n          } else if (page === -pageHeight * 4 && !isFooter) {\n            setPage(footerMinus);\n            setIsFooter(true);\n          }\n        } else if (touchDirection < -4) {\n          //위로 스크롤\n          if (isFooter) {\n            setPage(footerPlus);\n            setIsFooter(false);\n          } else if (page < 0) {\n            // movePage(pageHeight);\n            setPage(plusScroll);\n          }\n        }\n      }\n    },\n    [isFooter, page, pageHeight, throttle, touch]\n  );\n\n  const wheelHandler = useCallback(\n    (e: React.WheelEvent) => {\n      e.preventDefault();\n      // const pageHeight = ref.current.clientHeight;\n      const scrollDown: boolean = e.deltaY > 0;\n      const scrollUp: boolean = e.deltaY <= 0;\n      const copyThrottle = throttle;\n      const newTimer = timer;\n\n      if (copyThrottle) return;\n\n      timer.forEach((item: any) => {\n        clearTimeout(item);\n      });\n      setTimer([]);\n      setThrottle(true);\n      let t = setTimeout(() => {\n        setThrottle(false);\n      }, 1410);\n      setTimer([...newTimer, t]);\n\n      const footerMinus = page - ref.current.children[5].clientHeight;\n      const footerPlus = page + ref.current.children[5].clientHeight;\n      const minusScroll = page - pageHeight;\n      const plusScroll = page + pageHeight;\n      if (!copyThrottle) {\n        if (scrollDown) {\n          //아래로 스크롤;\n          if (page <= 0 && page > -pageHeight * 4) {\n            setPage(minusScroll);\n          } else if (page === -pageHeight * 4 && !isFooter) {\n            setPage(footerMinus);\n            setIsFooter(true);\n          }\n        } else if (scrollUp) {\n          //위로 스크롤\n          if (isFooter) {\n            setPage(footerPlus);\n            setIsFooter(false);\n          } else if (page < 0) {\n            // movePage(pageHeight);\n            setPage(plusScroll);\n          }\n        }\n      }\n    },\n    [isFooter, page, pageHeight, throttle, timer]\n  );\n\n  useEffect(() => {\n    const refCurrent = ref.current;\n    refCurrent.addEventListener(\"wheel\", wheelHandler);\n    refCurrent.addEventListener(\"touchstart\", handleTouchStart);\n    refCurrent.addEventListener(\"touchmove\", touchScrollHandler);\n\n    return () => {\n      refCurrent.removeEventListener(\"wheel\", wheelHandler);\n      refCurrent.removeEventListener(\"touchstart\", handleTouchStart);\n      refCurrent.removeEventListener(\"touchmove\", touchScrollHandler);\n    };\n  }, [wheelHandler, touchScrollHandler, handleTouchStart]);\n\n  return { ref, style };\n};\n\nexport default useScrollPagination;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}